<!doctype html>

<!--[if lt IE 7]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">

    <title>Panda Tracker</title>

    <link type="text/css" href="style/smoothness/jquery-ui-1.8.16.custom.css" rel="stylesheet" >
    <link type="text/css" href="style/vendor/visualsearch.css" rel="stylesheet" />
    <link rel="stylesheet" href="style/screen.css" media="screen, projection">
    <link rel="stylesheet" href="style/fancypants.css" media="screen, projection">

    <style type="text/css">
      input{
        margin:0px;
      }
      .left {
        float:left;
      }
      
      .right {
        float:right;
      }

      .middle {
        float:left;
        display:inline;
      }

      .visual-search {
        width:495px;
        margin-top:2px;
        float:left;
      }

      .dropdown {
        list-style: none;
        background: #FCFCFC;
        position: absolute;
        z-index: 100;
        left: 3px;
        top: 22px;
        width: 130px;
        border: 1px solid #AFAFAF;
        text-align:left;
        display:none;
        margin:0px;
        padding:2px;
      }

      .dropdown.actions {
        left:10px;
      }

      .dropdown.tags {
        left:100px;
      }

      .dropdown li:hover {
        cursor:pointer;
      }

      .removeme {
        width:100%;
        height:100%;
        position:absolute;
        top:0;
        left:0;
      }

      .results {
        width:100%;
      }
      
      .results tr {
        border-collapse:collapse;
        -webkit-border-horizontal-spacing: 0px;
        -webkit-border-vertical-spacing: 0px;
        
      }
      .results td {
        padding:0px;
        padding-left:5px;
        margin:0px;
        border-collapse:collapse;
        border-bottom:1px solid lightgray;
        -webkit-border-horizontal-spacing: 0px;
        -webkit-border-vertical-spacing: 0px;
        height:24px;
      }

      .results tr > td:first-child {
        width:10px;
        cursor: url(style/vendor/google/openhand.cur),default;
        background: url(style/vendor/google/grippy.png) no-repeat 4px 50%;
      }


      .results tr > td:nth-child(2) {
        width:10px;
      }

      .transformed {
        -webkit-transform: rotate(5deg) scale(1.25, 0.5);
        -moz-transform: rotate(5deg) scale(1.25, 0.5);
        -ms-transform: rotate(5deg) scale(1.25, 0.5);
        transform: rotate(5deg) scale(1.25, 0.5);
      }

    </style>

    <script src="js/vendor/modernizr-1.6.min.js"></script>
    <script src="js/vendor/jquery-1.5.1.min.js"></script>
    <script src="js/vendor/jquery-ui-1.8.16.custom.min.js"></script>
    <script src="js/vendor/underscore.js"></script>
    <script src="js/vendor/backbone.js"></script>
    <script src="js/vendor/visualsearch.js"></script>

    <script src="js/PandaTracker.js"></script>

    <script type="text/template" id="tasklist-template">
      <button id="select-all">Select All</button>
      <button id="unselect-all">UnSelect All</button>
      <table class="tasks">
        <thead>
          <tr>
            <th>description</th>
            <th>abstract</th>
          </tr>
        </thead>
      </table>      
    </script>
    
    <script type="text/template" id="task-template">
      <td><%= description %></td>
      <td><%= abstract %></td>
    </script>

    <script type="application/javascript">
      jQuery(function() {
        //window.library.fetch();
      });
    </script>
    
    <script type="application/javascript">
	$(function() {

    //toolbar
    $('#select-all').button({
        text:true,
        icons : {
          secondary: 'ui-icon-triangle-1-s'
          }
      })
      .find("input")
      .click(function(e){e.stopPropagation()});

    $('#select-container').find(".dropdown li").click(function(){console.log("do-work2");});

    $("#tags").button()
	    .next()
        .button( {
            text: false,
            icons: {
                primary: "ui-icon-triangle-1-s"
            }
            })      .parent().find(".dropdown li").click(function(){console.log("do-work");});


    $("#tag-commands").buttonset();

    $("#actions-select, #select-all,#tag-select").click(function(){
              var $parent = $(this).parent();
              $parent.find(".dropdown").toggle();
              $("body").append('<div class="removeme">&nbsp;</div>');
              $(".removeme").click(function(){
                $parent.find('.dropdown').hide();
                $(this).remove();
              });
            }).parent().find(".dropdown li").click(function(){$(this).parent().toggle();$(".removeme").remove();});

		$("#actions")
			.button()
			.next()
        .button( {
            text: false,
            icons: {
                primary: "ui-icon-triangle-1-s"
            }
            })      .parent().find(".dropdown li").click(function(){console.log("do-work");});


    $('#extra-commands').buttonset();

    $("#close").button();
    $("#remove").button();
    $("#common-commands").buttonset();

	  $("#settings")
	    .button({
	      text:false,
	      icons : {
	        primary: "ui-icon-gear"
        }
	    });

    //sortable table
  
    var fixHelper = function(e,ui) {
      ui.children().each(function() {
              $(this).width($(this).width());
          });
      return ui;
    };
    
    var start = function(e,ui){
      $(ui.placeholder).height($(ui.item).height()).append("");
      $(ui.item).addClass("ui-state-highlight");
    }
    
    var stop = function(e,ui){
      $(ui.item).removeClass("ui-state-highlight");
    }
    //$(".results tbody").sortable({ helper:fixHelper }).disableSelection();


    $(".results tbody").sortable({
      helper:fixHelper,
      start:start,
      stop:stop,
      placeholder: "ui-state-highlight"
      }).disableSelection();

    //shift select

    //search box
    $("#search").button();
    var visualSearch = VS.init({
        container : $('.visual-search'),
        query     : '',
        callbacks : {
            search          : function(query,searchCollection) {},
            facetMatches    : function(callback) {},
            valueMatches    : function(facet,searchTerm,callback) {}
        }
    });
	});
	</script>

  </head>

  <body>
      <div id="dragger" style="display:none;border:1px solid black;background:blue;color:white;width:100px;height:20px;text-align:centre">DRAGGING!!</div>
      <div id="header">
          <h1 style="float:left">Panda Tracker</h1>
      </div>
    <br class="clear"/>
    <div id="container">
          <div>
            <div class="visual-search"></div>
            <button id="search">Search</button>
          </div>
            <br class="clear"/>
            <div id="toolbar" class="ui-widget-header ui-corner-all" style="position:relative">
              <div class="left">
                <span id="select-container" style="position:relative">
                  <button id="select-all">
                    <input type="checkbox"/>
                  </button>
                  <ul class="dropdown">
                    <li>option 1</li>
                  </ul>
                </span>
                <span id="common-commands">
                  <button id="close">Close</button>
                  <button id="remove">Remove</button>
                </span>
              </div>

              <div class="right">
                <button id="tags">Send for House Member Review</button>
                <button id="settings">Settings</button>
              </div>
              <br class="clear"/>
            </div>

            <table cellpadding="0" cellspacing="0" class="results">
              <tbody>
                <tr>
                  <td>&nbsp;</td>
                  <td><input type="checkbox"/></td>
                  <td>1</td>
                  <td>Stuff</td>
                  <td>Awesome</td>
                  <td>bleh</td>
                  <td>woot</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td><input type="checkbox"/></td>
                  <td>2</td>
                  <td>Stuff</td>
                  <td>Awesome</td>
                  <td>bleh</td>
                  <td>woot</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td><input type="checkbox"/></td>
                  <td>3</td>
                  <td>Stuff</td>
                  <td>Awesome</td>
                  <td>bleh</td>
                  <td>woot</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td><input type="checkbox"/></td>
                  <td>4</td>
                  <td>Stuff</td>
                  <td>Awesome</td>
                  <td>bleh</td>
                  <td>woot</td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td><input type="checkbox"/></td>
                  <td>5</td>
                  <td>Stuff</td>
                  <td>Awesome</td>
                  <td>bleh</td>
                  <td>woot</td>
                </tr>
              </tbody>
            </table>
    </div>
    <div id="footer"</div>
  </body>
</html>
